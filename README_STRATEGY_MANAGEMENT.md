# ç­–ç•¥ç®¡ç†ç³»ç»Ÿ

å…¨æ–°çš„é‡åŒ–ç­–ç•¥ç®¡ç†åŠŸèƒ½å·²ç»å®ç°ï¼æ”¯æŒåˆ›å»ºã€é…ç½®ã€æ‰§è¡Œå¤šå› å­é€‰è‚¡ç­–ç•¥ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### âœ… ç­–ç•¥åˆ›å»º
- **åˆ†æ­¥å¼åˆ›å»ºæµç¨‹**ï¼šå¼•å¯¼ç”¨æˆ·é€æ­¥å®Œæˆç­–ç•¥é…ç½®
- **å› å­é€‰æ‹©**ï¼šä»å› å­åº“ä¸­é€‰æ‹©å¤šä¸ªå› å­
- **æƒé‡é…ç½®**ï¼šä¸ºæ¯ä¸ªå› å­è®¾ç½®æƒé‡ï¼Œè‡ªåŠ¨éªŒè¯æƒé‡æ€»å’Œ
- **ç­›é€‰æ¡ä»¶**ï¼šé…ç½®å¸‚å€¼ã€ä»·æ ¼ã€è¡Œä¸šç­‰ç­›é€‰æ¡ä»¶
- **ç­–ç•¥å‚æ•°**ï¼šè®¾ç½®æœ€å¤§é€‰è‚¡æ•°é‡ã€è°ƒä»“é¢‘ç‡ç­‰

### âœ… ç­–ç•¥ç®¡ç†
- **ç­–ç•¥åˆ—è¡¨**ï¼šå±•ç¤ºæ‰€æœ‰åˆ›å»ºçš„ç­–ç•¥åŠå…¶çŠ¶æ€
- **ç­–ç•¥è¯¦æƒ…**ï¼šæŸ¥çœ‹ç­–ç•¥çš„å®Œæ•´é…ç½®ä¿¡æ¯
- **ç­–ç•¥æ‰§è¡Œ**ï¼šä¸€é”®æ‰§è¡Œç­–ç•¥é€‰è‚¡
- **ç­–ç•¥ç¼–è¾‘**ï¼šæ”¯æŒä¿®æ”¹ç­–ç•¥é…ç½®ï¼ˆåç»­æ‰©å±•ï¼‰
- **ç­–ç•¥åˆ é™¤**ï¼šå®‰å…¨åˆ é™¤ä¸éœ€è¦çš„ç­–ç•¥

### âœ… æ‰§è¡Œç®¡ç†
- **å®æ—¶æ‰§è¡Œ**ï¼šç«‹å³æ‰§è¡Œç­–ç•¥é€‰è‚¡
- **æ‰§è¡Œå†å²**ï¼šè®°å½•æ¯æ¬¡æ‰§è¡Œçš„ç»“æœ
- **æ‰§è¡Œç»Ÿè®¡**ï¼šç»Ÿè®¡æ‰§è¡Œæ¬¡æ•°ã€å¹³å‡è€—æ—¶ç­‰
- **ç»“æœå±•ç¤º**ï¼šæ˜¾ç¤ºé€‰ä¸­çš„è‚¡ç¥¨åŠå…¶å¾—åˆ†

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯å®ç°

```
backend/app/
â”œâ”€â”€ schemas/strategy.py              # ç­–ç•¥ç›¸å…³æ•°æ®æ¨¡å‹
â”œâ”€â”€ db/models/strategy.py           # ç­–ç•¥æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ services/strategy_management_service.py  # ç­–ç•¥ç®¡ç†æœåŠ¡
â””â”€â”€ api/v1/endpoints/strategy_management.py  # ç­–ç•¥ç®¡ç†API
```

#### æ ¸å¿ƒæ•°æ®æ¨¡å‹

**StrategyFactor** - ç­–ç•¥ä¸­çš„å› å­é…ç½®
```python
{
    "factor_id": "alpha001",      # å› å­ID
    "factor_name": "åŠ¨é‡å› å­",     # å› å­åç§°
    "weight": 0.3,               # æƒé‡
    "is_enabled": true           # æ˜¯å¦å¯ç”¨
}
```

**StrategyFilter** - ç­–ç•¥ç­›é€‰æ¡ä»¶
```python
{
    "min_market_cap": 1000000,   # æœ€å°å¸‚å€¼
    "max_market_cap": 50000000,  # æœ€å¤§å¸‚å€¼
    "exclude_st": true,          # æ’é™¤STè‚¡ç¥¨
    "exclude_new_stock": true,   # æ’é™¤æ–°è‚¡
    "exclude_suspend": true      # æ’é™¤åœç‰Œè‚¡ç¥¨
}
```

**StrategyConfig** - ç­–ç•¥é…ç½®
```python
{
    "max_results": 50,           # æœ€å¤§é€‰è‚¡æ•°é‡
    "rebalance_frequency": "weekly",  # è°ƒä»“é¢‘ç‡
    "ranking_method": "composite"     # æ’åºæ–¹æ³•
}
```

### å‰ç«¯å®ç°

```
frontend/src/
â”œâ”€â”€ components/StrategyCreateModal.tsx   # ç­–ç•¥åˆ›å»ºç»„ä»¶
â”œâ”€â”€ pages/StrategyManagement.tsx         # ç­–ç•¥ç®¡ç†é¡µé¢
â””â”€â”€ services/api.ts                      # APIæ¥å£å®šä¹‰
```

#### æ ¸å¿ƒç»„ä»¶

**StrategyCreateModal** - åˆ†æ­¥å¼ç­–ç•¥åˆ›å»º
- ç¬¬ä¸€æ­¥ï¼šåŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ï¼‰
- ç¬¬äºŒæ­¥ï¼šå› å­é€‰æ‹©ï¼ˆé€‰æ‹©å› å­ã€è®¾ç½®æƒé‡ï¼‰
- ç¬¬ä¸‰æ­¥ï¼šé…ç½®å‚æ•°ï¼ˆç­›é€‰æ¡ä»¶ã€ç­–ç•¥å‚æ•°ï¼‰

**StrategyManagement** - ç­–ç•¥ç®¡ç†ä¸»ç•Œé¢
- ç­–ç•¥åˆ—è¡¨å±•ç¤º
- æœç´¢å’Œç­›é€‰
- ç­–ç•¥æ“ä½œï¼ˆæŸ¥çœ‹ã€æ‰§è¡Œã€åˆ é™¤ï¼‰
- ç»Ÿè®¡ä¿¡æ¯å±•ç¤º

## ğŸ›ï¸ APIæ¥å£

### ç­–ç•¥ç®¡ç†æ¥å£

```http
# åˆ›å»ºç­–ç•¥
POST /api/v1/strategy-management/
Content-Type: application/json

{
  "name": "å¤šå› å­é€‰è‚¡ç­–ç•¥",
  "description": "åŸºäºåŠ¨é‡å’Œä»·å€¼å› å­çš„é€‰è‚¡ç­–ç•¥",
  "factors": [
    {
      "factor_id": "alpha001",
      "factor_name": "åŠ¨é‡å› å­",
      "weight": 0.6,
      "is_enabled": true
    },
    {
      "factor_id": "alpha002",
      "factor_name": "ä»·å€¼å› å­",
      "weight": 0.4,
      "is_enabled": true
    }
  ],
  "filters": {
    "min_market_cap": 1000000,
    "exclude_st": true,
    "exclude_new_stock": true
  },
  "config": {
    "max_results": 30,
    "rebalance_frequency": "weekly"
  }
}
```

```http
# è·å–ç­–ç•¥åˆ—è¡¨
GET /api/v1/strategy-management/?skip=0&limit=20&keyword=å¤šå› å­

# è·å–å•ä¸ªç­–ç•¥
GET /api/v1/strategy-management/{strategy_id}

# æ‰§è¡Œç­–ç•¥
POST /api/v1/strategy-management/{strategy_id}/execute
{
  "dry_run": false,
  "save_result": true
}

# è·å–æ‰§è¡Œå†å²
GET /api/v1/strategy-management/{strategy_id}/executions

# è·å–å¯ç”¨å› å­
GET /api/v1/strategy-management/{strategy_id}/available-factors
```

## ğŸŒŸ ç”¨æˆ·ä½“éªŒ

### ç­–ç•¥åˆ›å»ºæµç¨‹

1. **ç‚¹å‡»"åˆ›å»ºç­–ç•¥"** - æ‰“å¼€åˆ›å»ºå‘å¯¼
2. **å¡«å†™åŸºæœ¬ä¿¡æ¯** - è¾“å…¥ç­–ç•¥åç§°å’Œæè¿°
3. **é€‰æ‹©å› å­** - ä»å› å­åº“ä¸­é€‰æ‹©æ‰€éœ€å› å­
4. **è®¾ç½®æƒé‡** - ä¸ºæ¯ä¸ªå› å­åˆ†é…æƒé‡ï¼ˆè‡ªåŠ¨éªŒè¯æ€»å’Œä¸º1ï¼‰
5. **é…ç½®å‚æ•°** - è®¾ç½®ç­›é€‰æ¡ä»¶å’Œç­–ç•¥å‚æ•°
6. **ç¡®è®¤åˆ›å»º** - éªŒè¯é…ç½®å¹¶åˆ›å»ºç­–ç•¥

### ç­–ç•¥ç®¡ç†ç•Œé¢

- **å¡ç‰‡å¼å±•ç¤º**ï¼šæ¯ä¸ªç­–ç•¥ä»¥å¡ç‰‡å½¢å¼å±•ç¤ºï¼ŒåŒ…å«å…³é”®ä¿¡æ¯
- **çŠ¶æ€æ ‡è¯†**ï¼šæ¸…æ™°æ˜¾ç¤ºç­–ç•¥çš„å¯ç”¨/ç¦ç”¨çŠ¶æ€
- **å¿«é€Ÿæ“ä½œ**ï¼šæä¾›æŸ¥çœ‹ã€æ‰§è¡Œã€ç¼–è¾‘ã€åˆ é™¤ç­‰æ“ä½œæŒ‰é’®
- **ç»Ÿè®¡ä¿¡æ¯**ï¼šå±•ç¤ºæ€»ç­–ç•¥æ•°ã€å¯ç”¨ç­–ç•¥æ•°ã€æ‰§è¡Œæ¬¡æ•°ç­‰
- **æœç´¢ç­›é€‰**ï¼šæ”¯æŒæŒ‰å…³é”®è¯æœç´¢ç­–ç•¥

### å› å­æƒé‡ç®¡ç†

- **å¯è§†åŒ–æƒé‡**ï¼šä»¥ç™¾åˆ†æ¯”å½¢å¼æ˜¾ç¤ºå› å­æƒé‡
- **å®æ—¶éªŒè¯**ï¼šæƒé‡ä¿®æ”¹æ—¶å®æ—¶éªŒè¯æ€»å’Œ
- **è‡ªåŠ¨åˆ†é…**ï¼šæ·»åŠ /åˆ é™¤å› å­æ—¶è‡ªåŠ¨é‡æ–°åˆ†é…ç­‰æƒé‡
- **å¯ç”¨åˆ‡æ¢**ï¼šæ”¯æŒä¸´æ—¶ç¦ç”¨æŸä¸ªå› å­

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºå¤šå› å­ç­–ç•¥

```javascript
// å‰ç«¯APIè°ƒç”¨ç¤ºä¾‹
const strategyData = {
  name: "ä»·å€¼åŠ¨é‡ç»„åˆç­–ç•¥",
  description: "ç»“åˆä»·å€¼å’ŒåŠ¨é‡å› å­çš„é•¿æœŸç­–ç•¥",
  factors: [
    {
      factor_id: "value_factor_001",
      factor_name: "PBä¼°å€¼å› å­", 
      weight: 0.4,
      is_enabled: true
    },
    {
      factor_id: "momentum_factor_001", 
      factor_name: "20æ—¥åŠ¨é‡å› å­",
      weight: 0.6,
      is_enabled: true
    }
  ],
  filters: {
    min_market_cap: 5000000,     // æœ€å°å¸‚å€¼50äº¿
    exclude_st: true,            // æ’é™¤STè‚¡ç¥¨
    exclude_new_stock: true,     // æ’é™¤æ–°è‚¡
    exclude_suspend: true        // æ’é™¤åœç‰Œè‚¡ç¥¨
  },
  config: {
    max_results: 30,             // æœ€å¤šé€‰30åªè‚¡ç¥¨
    rebalance_frequency: "weekly", // æ¯å‘¨è°ƒä»“
    ranking_method: "composite"   // ç»¼åˆæ’åº
  }
};

const strategy = await strategyManagementApi.createStrategy(strategyData);
```

### æ‰§è¡Œç­–ç•¥é€‰è‚¡

```javascript
// æ‰§è¡Œç­–ç•¥
const result = await strategyManagementApi.executeStrategy(strategy.strategy_id, {
  dry_run: false,      // å®é™…æ‰§è¡Œ
  save_result: true    // ä¿å­˜ç»“æœ
});

console.log(`é€‰ä¸­${result.stock_count}åªè‚¡ç¥¨ï¼Œè€—æ—¶${result.execution_time}ç§’`);
```

## ğŸ“Š æ‰§è¡Œç»“æœ

ç­–ç•¥æ‰§è¡Œåä¼šè¿”å›é€‰ä¸­çš„è‚¡ç¥¨åˆ—è¡¨ï¼ŒåŒ…å«ï¼š

```javascript
{
  "execution_id": "uuid",
  "strategy_id": "strategy_uuid", 
  "execution_date": "2024-01-15",
  "execution_time": 2.35,
  "stock_count": 25,
  "selected_stocks": [
    {
      "stock_code": "000001.SZ",
      "stock_name": "å¹³å®‰é“¶è¡Œ",
      "composite_score": 0.85,
      "factor_scores": {
        "value_factor_001": 0.8,
        "momentum_factor_001": 0.9
      },
      "rank": 1,
      "market_cap": 3500000,
      "price": 15.68
    }
    // ... æ›´å¤šè‚¡ç¥¨
  ]
}
```

## ğŸ”§ é…ç½®é€‰é¡¹

### ç­›é€‰æ¡ä»¶é€‰é¡¹

- **å¸‚å€¼ç­›é€‰**ï¼šæœ€å°/æœ€å¤§å¸‚å€¼é™åˆ¶
- **ä»·æ ¼ç­›é€‰**ï¼šæœ€å°/æœ€å¤§è‚¡ä»·é™åˆ¶  
- **æ¢æ‰‹ç‡ç­›é€‰**ï¼šæœ€å°/æœ€å¤§æ¢æ‰‹ç‡é™åˆ¶
- **ç‰¹æ®Šè‚¡ç¥¨**ï¼šæ’é™¤STã€æ–°è‚¡ã€åœç‰Œè‚¡ç¥¨
- **è¡Œä¸šç­›é€‰**ï¼šåŒ…å«/æ’é™¤ç‰¹å®šè¡Œä¸š

### ç­–ç•¥å‚æ•°é€‰é¡¹

- **é€‰è‚¡æ•°é‡**ï¼š1-1000åªè‚¡ç¥¨
- **è°ƒä»“é¢‘ç‡**ï¼šæ¯æ—¥/æ¯å‘¨/æ¯æœˆ
- **æ’åºæ–¹æ³•**ï¼šç»¼åˆå¾—åˆ†/åŠ æƒæ±‚å’Œ

## ğŸ’¡ æœ€ä½³å®è·µ

### å› å­é€‰æ‹©å»ºè®®

1. **å› å­æ•°é‡**ï¼šå»ºè®®é€‰æ‹©2-5ä¸ªå› å­ï¼Œé¿å…è¿‡åº¦å¤æ‚
2. **å› å­ç±»å‹**ï¼šé€‰æ‹©ä¸åŒç±»å‹çš„å› å­ä»¥åˆ†æ•£é£é™©
3. **æƒé‡åˆ†é…**ï¼šæ ¹æ®å› å­çš„å†å²è¡¨ç°è°ƒæ•´æƒé‡
4. **å®šæœŸæ£€æŸ¥**ï¼šå®šæœŸæ£€æŸ¥å› å­çš„æœ‰æ•ˆæ€§

### ç­–ç•¥é…ç½®å»ºè®®

1. **é€‰è‚¡æ•°é‡**ï¼šå»ºè®®20-50åªè‚¡ç¥¨ï¼Œå¹³è¡¡é£é™©å’Œæ”¶ç›Š
2. **è°ƒä»“é¢‘ç‡**ï¼šæ ¹æ®å¸‚åœºç¯å¢ƒé€‰æ‹©åˆé€‚é¢‘ç‡
3. **ç­›é€‰æ¡ä»¶**ï¼šè®¾ç½®åˆç†çš„å¸‚å€¼å’ŒæµåŠ¨æ€§è¦æ±‚
4. **å›æµ‹éªŒè¯**ï¼šåˆ›å»ºåè¿›è¡Œå†å²å›æµ‹éªŒè¯

## ğŸ“ˆ åç»­æ‰©å±•

### è®¡åˆ’åŠŸèƒ½

1. **ç­–ç•¥ç¼–è¾‘**ï¼šæ”¯æŒä¿®æ”¹ç°æœ‰ç­–ç•¥é…ç½®
2. **ç­–ç•¥å¤åˆ¶**ï¼šåŸºäºç°æœ‰ç­–ç•¥åˆ›å»ºæ–°ç­–ç•¥
3. **ç­–ç•¥æ¨¡æ¿**ï¼šé¢„å®šä¹‰çš„ç­–ç•¥æ¨¡æ¿
4. **ç­–ç•¥å›æµ‹**ï¼šå†å²æ•°æ®å›æµ‹åŠŸèƒ½
5. **ç­–ç•¥ç»„åˆ**ï¼šå¤šç­–ç•¥ç»„åˆç®¡ç†
6. **é£é™©æ§åˆ¶**ï¼šé£é™©æŒ‡æ ‡å’Œæ§åˆ¶æªæ–½

### ä¼˜åŒ–æ–¹å‘

1. **æ‰§è¡Œæ€§èƒ½**ï¼šä¼˜åŒ–é€‰è‚¡ç®—æ³•æ‰§è¡Œé€Ÿåº¦
2. **å› å­è®¡ç®—**ï¼šé›†æˆæ›´å¤šå› å­è®¡ç®—æœåŠ¡
3. **æ•°æ®æº**ï¼šæ”¯æŒæ›´å¤šæ•°æ®æºæ¥å…¥
4. **å¯è§†åŒ–**ï¼šå¢å¼ºç­–ç•¥å’Œç»“æœçš„å¯è§†åŒ–
5. **ç›‘æ§å‘Šè­¦**ï¼šç­–ç•¥æ‰§è¡Œç›‘æ§å’Œå¼‚å¸¸å‘Šè­¦

è¿™å¥—ç­–ç•¥ç®¡ç†ç³»ç»Ÿä¸ºé‡åŒ–æŠ•èµ„æä¾›äº†å®Œæ•´çš„ç­–ç•¥ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä»åˆ›å»ºåˆ°æ‰§è¡Œï¼Œè®©é‡åŒ–é€‰è‚¡å˜å¾—æ›´åŠ ç³»ç»ŸåŒ–å’Œä¸“ä¸šåŒ–ï¼