# 量化主观选股系统需求文档

## 介绍

本系统是一个量化主观选股系统，旨在帮助投资者通过技术分析和量化指标来筛选和监控股票。系统采用前后端分离架构，前端使用React + AntDesign构建管理后台，后端使用Python + Tushare + SQLite提供数据服务和计算能力。

系统核心价值在于将主观投资经验与量化分析相结合，通过自定义因子和策略组合，实现个性化的选股决策支持。

## 需求

### 需求 1: 大盘监控功能

**用户故事:** 作为一个投资者，我希望能够实时监控各个指数大盘信息和自选股价格数据，以便快速了解市场整体走势和重点关注股票的表现。

#### 验收标准

1. 当用户访问首页时，那么系统应该显示主要指数（上证指数、深证成指、创业板指数等）的实时价格、涨跌幅、成交量等关键指标
2. 当用户查看大盘监控页面时，那么系统应该以图表形式展示各指数的历史走势数据
3. 当用户添加股票到自选股列表时，那么系统应该在大盘监控页面同时显示这些自选股的实时价格数据
4. 当股票价格发生变化时，那么系统应该自动更新显示的价格信息，更新频率不超过5秒
5. 当用户点击任一指数或自选股时，那么系统应该显示该标的的详细信息和K线图
6. 如果数据获取失败，那么系统应该显示友好的错误提示并提供重试选项

### 需求 2: 量化选股策略模块

**用户故事:** 作为一个投资者，我希望能够定制量化选股因子并组合多个因子进行股票筛选，以便根据我的投资策略找到符合条件的投资标的。

#### 验收标准

1. 当用户进入量化选股模块时，那么系统应该提供因子管理界面，支持创建、编辑、删除自定义因子
2. 当用户创建因子时，那么系统应该提供Python代码编辑器，支持语法高亮和基本的代码验证
3. 当用户编写因子代码时，那么系统应该提供Tushare数据接口的文档和示例代码参考
4. 当用户保存因子时，那么系统应该验证Python代码的语法正确性并测试数据获取是否正常
5. 当用户配置选股策略时，那么系统应该支持选择多个因子并设置每个因子的权重和筛选条件
6. 当用户执行选股策略时，那么系统应该基于配置的因子组合计算所有股票的得分并按得分排序
7. 当选股结果生成后，那么系统应该以表格形式展示筛选出的股票列表，包含股票代码、名称、各因子得分、综合得分等信息
8. 当用户查看选股结果时，那么系统应该支持将满意的股票批量或单个添加到自选股列表
9. 如果因子代码执行出错，那么系统应该显示具体的错误信息并提供调试建议

### 需求 3: 自选股管理功能

**用户故事:** 作为一个投资者，我希望能够管理我的自选股列表，以便持续跟踪我感兴趣的股票表现。

#### 验收标准

1. 当用户添加股票到自选股时，那么系统应该将股票信息保存到数据库并在相关页面实时显示
2. 当用户查看自选股列表时，那么系统应该显示每只股票的基本信息、当前价格、涨跌幅、成交量等关键数据
3. 当用户删除自选股时，那么系统应该从列表中移除该股票并更新相关页面的显示
4. 当自选股价格变化时，那么系统应该在大盘监控页面同步更新显示
5. 当用户点击自选股列表中的股票时，那么系统应该显示该股票的详细信息和历史走势图表

### 需求 4: 数据管理和更新

**用户故事:** 作为系统管理员，我希望系统能够自动获取和更新股票数据，以便为用户提供准确及时的市场信息。

#### 验收标准

1. 当系统启动时，那么应该自动连接Tushare数据源并验证API访问权限
2. 当需要股票数据时，那么系统应该优先从本地SQLite数据库获取，如果数据不存在或过期则从Tushare获取最新数据
3. 当从Tushare获取数据时，那么系统应该处理API限制和网络异常，确保数据获取的稳定性
4. 当数据更新完成时，那么系统应该将新数据存储到SQLite数据库中，并更新相关的缓存
5. 如果数据获取失败，那么系统应该记录错误日志并使用备用数据源或提示用户

### 需求 5: 用户界面和体验

**用户故事:** 作为一个投资者，我希望系统界面友好易用，能够快速找到需要的功能并高效完成操作。

#### 验收标准

1. 当用户访问系统时，那么应该看到清晰的导航菜单，包含"大盘监控"、"量化选股"、"自选股管理"等主要功能模块
2. 当用户使用图表功能时，那么系统应该使用Plotly提供交互式图表，支持缩放、平移、数据点查看等操作
3. 当用户进行数据密集型操作时，那么系统应该显示加载状态和进度提示
4. 当操作完成时，那么系统应该提供明确的成功或失败反馈
5. 当用户在移动设备上访问时，那么界面应该自适应屏幕尺寸并保持良好的可用性
6. 如果用户操作可能导致数据丢失，那么系统应该提供确认对话框进行二次确认

## 技术约束

1. 前端必须使用React + AntDesign + Plotly技术栈
2. 后端必须使用Python + Tushare + SQLite技术栈  
3. 系统需要支持Tushare API的访问限制和数据格式
4. 数据存储使用SQLite，需要考虑并发访问和数据一致性
5. 因子代码执行需要安全隔离，防止恶意代码执行
6. 系统需要处理股票市场的交易时间限制（如休市时间数据更新策略）

## 成功标准

1. 用户能够在5分钟内完成基本的大盘监控查看
2. 用户能够在10分钟内创建并测试一个简单的选股因子
3. 选股策略执行时间不超过30秒（针对全市场股票）
4. 系统数据更新延迟不超过5分钟（交易时间内）
5. 用户界面响应时间不超过2秒
6. 系统可以稳定运行24小时而不出现严重错误